<div class="addresses">

  <div class="addresses__wrap">
    <div class="addresses__list" *ngIf="!addingAddress; else adding">
      <div class="addresses__item" *ngFor="let item of addresses">
        <ng-container *ngIf="item.addressType == 'f'; else uAddress">
          <span *ngIf="item.confirmed else notConfirmed"
            class="addresses__confirmed confirmed">{{'addresses.confirmed' | translate}}</span>
          <ng-template #notConfirmed>
            <span class="addresses__confirmed notconfirmed">{{'addresses.notconfirmed' | translate}}</span>
          </ng-template>
          <div class="addresses__phis-user">
            <div class="addresses__icon">
              <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 480 480"
                style="enable-background:new 0 0 480 480;" xml:space="preserve">
                <g>
                  <path d="M240,0C142.798,0,64,78.798,64,176c0,94.576,162.896,292.712,169.832,301.096c1.52,1.839,3.782,2.904,6.168,2.904
     c2.386,0,4.648-1.065,6.168-2.904C253.104,468.712,416,270.576,416,176C416,78.798,337.202,0,240,0z M240,459.288
     C209.896,421.712,80,254.976,80,176c0.101-88.324,71.677-159.899,160-160c88.324,0.101,159.899,71.676,160,160
     C400,254.96,270.104,421.704,240,459.288z" />
                  <path d="M348.88,145.664l-104-80c-2.877-2.214-6.883-2.214-9.76,0l-104,80c-3.499,2.697-4.149,7.721-1.452,11.22
     c1.514,1.964,3.852,3.115,6.332,3.116h24v88c0,4.418,3.582,8,8,8h144c4.418,0,8-3.582,8-8v-88h24
     c4.418-0.002,7.998-3.586,7.996-8.004C351.995,149.516,350.844,147.178,348.88,145.664z M256,240h-32v-48h32V240z M312,144
     c-4.418,0-8,3.582-8,8v88h-32v-56c0-4.418-3.582-8-8-8h-48c-4.418,0-8,3.582-8,8v56h-32v-88c0-4.418-3.582-8-8-8h-8.48
     L240,82.096L320.48,144H312z" />
                </g>
              </svg>
            </div>
            <div>

              <p class="addresses__text">
                {{item.regionName}} {{'personal.region' | translate }}.,
                {{'personal.city' | translate }}.{{item.cityName}},
                {{'personal.street' | translate }} {{item.streetName}}, {{item.house}}
                <ng-container *ngIf="item.apartment">
                  , {{'personal.apartment' | translate }} {{item.apartment}}
                </ng-container>
              </p>
              <div class="addresses__options">
                <button class="adresses__delete-btn"
                  (click)="deleteAddress(item.id)">{{'personal.delete' | translate }}</button>
                <ng-container *ngIf="item.confirmed && fAddressCount > 1">
                  <p *ngIf="item.isDefault; else notDefault" class="addresses__default-status">
                    {{'addresses.main-address' | translate}}</p>
                  <ng-template #notDefault>
                    <button (click)="makeTheMainAddresses(item.id)"
                      class="addresses__change">{{'addresses.btn' | translate}}</button>
                  </ng-template>
                </ng-container>

              </div>

            </div>
          </div>
        </ng-container>
        <ng-template #uAddress>
          <span *ngIf="item.confirmed else notConfirmed"
            class="addresses__confirmed confirmed">{{'addresses.confirmed' | translate}}</span>
          <ng-template #notConfirmed>
            <span class="addresses__confirmed notconfirmed">{{'addresses.notconfirmed' | translate}}</span>
          </ng-template>
          <div class="addresses__ur-user">
            <div class="addresses__icon">
              <svg version="1.1" id="Capa_1" xmlns="http://www.w3.org/2000/svg"
                xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 416 416"
                style="enable-background:new 0 0 416 416;" xml:space="preserve">
                <g>
                  <path d="M388,87.28v0.12H274.52V64.64c-0.022-12.76-10.36-23.098-23.12-23.12h-89.96c-6.128,0.006-12.001,2.453-16.32,6.8
                 c-4.347,4.319-6.794,10.192-6.8,16.32V87.4H28c-15.464,0-28,12.536-28,28v228.96c0.044,16.617,13.503,30.076,30.12,30.12H385.6
                 c16.679,0.11,30.289-13.321,30.399-29.999c0-0.04,0-0.081,0.001-0.121V115.28C416,99.816,403.464,87.28,388,87.28z M149.8,64.64
                 c0.022-6.419,5.221-11.618,11.64-11.64h89.92c6.41,0.044,11.596,5.23,11.64,11.64V87.4H149.8V64.64z M11.6,117.28
                 c0.044-10.276,8.364-18.596,18.64-18.64h355.48c10.276,0.044,18.596,8.364,18.64,18.64l-0.12,112.12
                 c-0.044,9.039-7.361,16.356-16.4,16.4H232v-16.24c0-7.666-6.214-13.88-13.88-13.88h-20.28c-3.655-0.012-7.165,1.427-9.76,4
                 c-2.573,2.595-4.012,6.105-4,9.76v16.24H28c-9.039-0.044-16.356-7.361-16.4-16.4V117.28z M195.32,245.8v-16.24
                 c0.029-0.586,0.27-1.141,0.68-1.56c0.45-0.438,1.053-0.682,1.68-0.68H218c1.326,0,2.4,1.075,2.4,2.4v16.24L195.32,245.8z
                  M220.4,257.28v16.24c0.006,0.628-0.239,1.233-0.68,1.68c-0.447,0.441-1.052,0.686-1.68,0.68h-20.2c-1.326,0-2.4-1.075-2.4-2.4
                 v-16.2H220.4z M404.4,344.36c-0.044,10.276-8.364,18.596-18.64,18.64H30.24c-10.276-0.044-18.596-8.364-18.64-18.64V252
                 c4.767,3.457,10.511,5.307,16.4,5.28h156v16.24c0,7.666,6.214,13.88,13.88,13.88h20.32c3.654,0.007,7.162-1.431,9.76-4
                 c2.569-2.598,4.007-6.106,4-9.76v-16.36h156c5.902,0.035,11.662-1.815,16.44-5.28V344.36z" />
                </g>
              </svg>
            </div>
            <p class="addresses__text">
              {{item.regionName}} {{'personal.region' | translate }}.,
              {{'personal.city' | translate }}.{{item.cityName}},
              {{'personal.street' | translate }} {{item.streetName}}, {{item.house}}
              <ng-container *ngIf="item.apartment">
                , {{'personal.apartment' | translate }} {{item.apartment}}
              </ng-container>
            </p>
          </div>
        </ng-template>
      </div>
      <div class="addresses__add" *ngIf="fAddressCount < 3">
        <button class="addresses__add-btn" (click)="addAddressForm()">{{'personal.addAddress' | translate }}</button>
      </div>
    </div>
    <ng-template #adding>
      <form class="addresses__form" [formGroup]="addressForm">
        <div class="addresses__field">
          <label class="addresses__label addresses__required"
            for="regionId">{{'personal.chooseRegion' | translate }}</label>
          <ng-select id="regionId" (clear)="clearAddress()" (change)="chooseAddress()" class="addresses__select"
            [items]="regions" [virtualScroll]="true" bindLabel="name" bindValue="id" formControlName="regionId">
          </ng-select>
        </div>
        <div class="addresses__field" *ngIf="cities.length > 0">
          <label class="addresses__label addresses__required"
            for="cityId">{{'personal.chooseCity' | translate }}</label>
          <ng-select id="cityId" (clear)="clearCity()"
            [class.error]="addressForm.controls.cityId.invalid && addressForm.controls.cityId.touched"
            (change)="chooseCity()" class="addresses__select" [items]="cities" [virtualScroll]="true" bindLabel="name"
            bindValue="id" formControlName="cityId">
          </ng-select>
        </div>
        <ng-container *ngIf="addressForm.value.cityId && streets.length > 0">
          <div class="addresses__field">
            <label class="addresses__label addresses__required"
              for="streetId">{{'personal.chooseStreet' | translate }}</label>
            <ng-select id="streetId" class="addresses__select"
              [class.error]="addressForm.controls.streetId.invalid && addressForm.controls.streetId.touched"
              [items]="streets" [virtualScroll]="true" bindLabel="name" bindValue="id" formControlName="streetId">
            </ng-select>
          </div>
          <div class="addresses__field">
            <label class="addresses__label addresses__required"
              for="house">{{'personal.numberHouse' | translate }}</label>
            <div class="addresses__input"
              [class.error]="addressForm.controls.house.invalid && addressForm.controls.house.touched">
              <input id="house" type="text" [placeholder]="'personal.numberHouse' | translate" formControlName="house">
            </div>
          </div>
          <div class="addresses__field">
            <label class="addresses__label" for="apartment">{{'personal.numberApartment' | translate }}</label>
            <div class="addresses__input"
              [class.error]="addressForm.controls.apartment.invalid && addressForm.controls.apartment.touched">
              <input id="apartment" type="text" [placeholder]="'personal.numberApartment' | translate"
                formControlName="apartment">
            </div>
          </div>
        </ng-container>
        <div class="addresses__add">
          <div class="addresses__error">
            <span *ngIf="addressExist">{{'personal.addressExist' | translate }}</span>
          </div>
          <div class="addresses__error">
            <span *ngIf="permission">{{'personal.permission' | translate }}</span>
          </div>
          <ng-container *ngIf="!addingData">
            <button class="adding addresses__add-btn" *ngIf="addressForm.value.cityId && streets.length > 0"
              (click)="addAddress()">
              {{'personal.addAddress' | translate }}
            </button>
          </ng-container>
          <ng-container *ngIf="addingData">
            <div class="addresses__checking">
              {{'personal.adding' | translate }}
              <div><span>.</span><span>.</span><span>.</span></div>
            </div>
          </ng-container>
          <button class="adding addresses__add-btn"
            (click)="backToAddresses()">{{'personal.back' | translate }}</button>
        </div>
      </form>
    </ng-template>
  </div>
</div>